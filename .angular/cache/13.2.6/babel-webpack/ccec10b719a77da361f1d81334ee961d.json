{"ast":null,"code":"import _asyncToGenerator from \"/Users/omrikellner/WebstormProjects/epicure-admin-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/services/auth.service\";\nimport * as i3 from \"@angular/forms\";\nexport class RegisterComponent {\n  constructor(router, authService) {\n    this.router = router;\n    this.authService = authService;\n    this.registerForm = new FormGroup({\n      email: new FormControl('', [Validators.required, Validators.email]),\n      password: new FormControl('', [Validators.required, Validators.minLength(10)])\n    });\n  }\n\n  ngOnInit() {\n    if (this.authService.isLoggedIn()) {\n      this.router.navigate(['restaurant']).then(res => console.log(res)).catch(err => console.log(err));\n    }\n  }\n\n  onSubmit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      if (_this.form.valid) {\n        const email = _this.form.value.email;\n        const password = _this.form.value.password;\n\n        try {\n          yield _this.authService.register(email, password);\n\n          _this.router.navigate(['login']).then(res => console.log(res)).catch(err => console.log(err));\n\n          alert('Created new user!');\n        } catch (error) {\n          console.log(error);\n          alert(error.error.error.name);\n        }\n      }\n    })();\n  }\n\n  onBack() {\n    // no validation req here\n    this.router.navigate(['login']).then(res => console.log(res)).catch(err => console.log(err));\n  }\n\n}\n\nRegisterComponent.ɵfac = function RegisterComponent_Factory(t) {\n  return new (t || RegisterComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.AuthService));\n};\n\nRegisterComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: RegisterComponent,\n  selectors: [[\"app-register\"]],\n  decls: 17,\n  vars: 2,\n  consts: [[3, \"formGroup\", \"ngSubmit\"], [1, \"containerForm\"], [\"id\", \"name\", \"formControlName\", \"name\", \"type\", \"text\", \"required\", \"\", 1, \"form-control\"], [\"for\", \"description\"], [\"id\", \"description\", \"formControlName\", \"description\", 1, \"form-control\"], [\"type\", \"submit\", 1, \"btn\", \"btn-success\"]],\n  template: function RegisterComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\")(1, \"form\", 0);\n      i0.ɵɵlistener(\"ngSubmit\", function RegisterComponent_Template_form_ngSubmit_1_listener() {\n        return ctx.onSubmit();\n      });\n      i0.ɵɵelementStart(2, \"h2\");\n      i0.ɵɵtext(3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"div\", 1)(5, \"div\")(6, \"label\");\n      i0.ɵɵtext(7, \"*Name: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(8, \"input\", 2);\n      i0.ɵɵelementStart(9, \"label\");\n      i0.ɵɵtext(10, \" Image: \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(11, \"div\")(12, \"label\", 3);\n      i0.ɵɵtext(13, \"Description: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(14, \"textarea\", 4);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(15, \"br\")(16, \"button\", 5);\n      i0.ɵɵelementEnd()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"formGroup\", ctx.registerForm);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.message);\n    }\n  },\n  directives: [i3.ɵNgNoValidate, i3.NgControlStatusGroup, i3.FormGroupDirective, i3.DefaultValueAccessor, i3.NgControlStatus, i3.FormControlName, i3.RequiredValidator],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJyZWdpc3Rlci5jb21wb25lbnQuc2NzcyJ9 */\"]\n});","map":{"version":3,"sources":["/Users/omrikellner/WebstormProjects/epicure-admin-angular/src/app/pages/register/register.component.ts"],"names":["FormControl","FormGroup","Validators","i0","i1","i2","i3","RegisterComponent","constructor","router","authService","registerForm","email","required","password","minLength","ngOnInit","isLoggedIn","navigate","then","res","console","log","catch","err","onSubmit","form","valid","value","register","alert","error","name","onBack","ɵfac","RegisterComponent_Factory","t","ɵɵdirectiveInject","Router","AuthService","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","RegisterComponent_Template","rf","ctx","ɵɵelementStart","ɵɵlistener","RegisterComponent_Template_form_ngSubmit_1_listener","ɵɵtext","ɵɵelementEnd","ɵɵelement","ɵɵadvance","ɵɵproperty","ɵɵtextInterpolate","message","directives","ɵNgNoValidate","NgControlStatusGroup","FormGroupDirective","DefaultValueAccessor","NgControlStatus","FormControlName","RequiredValidator","styles"],"mappings":"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","sourcesContent":["import { FormControl, FormGroup, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/services/auth.service\";\nimport * as i3 from \"@angular/forms\";\nexport class RegisterComponent {\n    constructor(router, authService) {\n        this.router = router;\n        this.authService = authService;\n        this.registerForm = new FormGroup({\n            email: new FormControl('', [Validators.required, Validators.email]),\n            password: new FormControl('', [\n                Validators.required,\n                Validators.minLength(10),\n            ]),\n        });\n    }\n    ngOnInit() {\n        if (this.authService.isLoggedIn()) {\n            this.router.navigate(['restaurant']).then(res => console.log(res)).catch(err => console.log(err));\n        }\n    }\n    async onSubmit() {\n        if (this.form.valid) {\n            const email = this.form.value.email;\n            const password = this.form.value.password;\n            try {\n                await this.authService.register(email, password);\n                this.router.navigate(['login']).then(res => console.log(res)).catch(err => console.log(err));\n                alert('Created new user!');\n            }\n            catch (error) {\n                console.log(error);\n                alert(error.error.error.name);\n            }\n        }\n    }\n    onBack() {\n        // no validation req here\n        this.router.navigate(['login']).then(res => console.log(res)).catch(err => console.log(err));\n    }\n}\nRegisterComponent.ɵfac = function RegisterComponent_Factory(t) { return new (t || RegisterComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.AuthService)); };\nRegisterComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: RegisterComponent, selectors: [[\"app-register\"]], decls: 17, vars: 2, consts: [[3, \"formGroup\", \"ngSubmit\"], [1, \"containerForm\"], [\"id\", \"name\", \"formControlName\", \"name\", \"type\", \"text\", \"required\", \"\", 1, \"form-control\"], [\"for\", \"description\"], [\"id\", \"description\", \"formControlName\", \"description\", 1, \"form-control\"], [\"type\", \"submit\", 1, \"btn\", \"btn-success\"]], template: function RegisterComponent_Template(rf, ctx) { if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\")(1, \"form\", 0);\n        i0.ɵɵlistener(\"ngSubmit\", function RegisterComponent_Template_form_ngSubmit_1_listener() { return ctx.onSubmit(); });\n        i0.ɵɵelementStart(2, \"h2\");\n        i0.ɵɵtext(3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"div\", 1)(5, \"div\")(6, \"label\");\n        i0.ɵɵtext(7, \"*Name: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(8, \"input\", 2);\n        i0.ɵɵelementStart(9, \"label\");\n        i0.ɵɵtext(10, \" Image: \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(11, \"div\")(12, \"label\", 3);\n        i0.ɵɵtext(13, \"Description: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(14, \"textarea\", 4);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(15, \"br\")(16, \"button\", 5);\n        i0.ɵɵelementEnd()();\n    } if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"formGroup\", ctx.registerForm);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.message);\n    } }, directives: [i3.ɵNgNoValidate, i3.NgControlStatusGroup, i3.FormGroupDirective, i3.DefaultValueAccessor, i3.NgControlStatus, i3.FormControlName, i3.RequiredValidator], styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJyZWdpc3Rlci5jb21wb25lbnQuc2NzcyJ9 */\"] });\n"]},"metadata":{},"sourceType":"module"}