{"ast":null,"code":"import { RestaurantsService } from '../services/restaurants.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/restaurants.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"../modals/restaurant-modal/restaurant-modal.component\";\nimport * as i4 from \"../modals/delete-modal/delete-modal.component\";\n\nfunction RestaurantsComponent_app_restaurant_modal_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"app-restaurant-modal\", 6);\n    i0.ɵɵlistener(\"restaurantCreated\", function RestaurantsComponent_app_restaurant_modal_2_Template_app_restaurant_modal_restaurantCreated_0_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.addRestaurant($event);\n    })(\"closeModalPopup\", function RestaurantsComponent_app_restaurant_modal_2_Template_app_restaurant_modal_closeModalPopup_0_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return ctx_r5.closeModal($event);\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"message\", ctx_r0.message)(\"editMode\", ctx_r0.editMode)(\"editRestaurant\", ctx_r0.editRestaurant);\n  }\n}\n\nfunction RestaurantsComponent_app_delete_modal_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"app-delete-modal\", 7);\n    i0.ɵɵlistener(\"closeDeleteModalPopup\", function RestaurantsComponent_app_delete_modal_3_Template_app_delete_modal_closeDeleteModalPopup_0_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.closeDeleteModal($event);\n    })(\"itemDeleted\", function RestaurantsComponent_app_delete_modal_3_Template_app_delete_modal_itemDeleted_0_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return ctx_r8.deleteRestaurant($event);\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"item\", ctx_r1.deletedRestaurantId);\n  }\n}\n\nfunction RestaurantsComponent_tbody_19_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tbody\")(1, \"tr\")(2, \"th\", 8);\n    i0.ɵɵelement(3, \"img\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"td\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"td\");\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"td\", 10)(13, \"a\")(14, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function RestaurantsComponent_tbody_19_Template_button_click_14_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const restaurant_r9 = restoredCtx.$implicit;\n      const ctx_r10 = i0.ɵɵnextContext();\n      return ctx_r10.openModal(\"edit\", restaurant_r9);\n    });\n    i0.ɵɵtext(15, \"Edit\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtext(16, \" | \");\n    i0.ɵɵelementStart(17, \"a\")(18, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function RestaurantsComponent_tbody_19_Template_button_click_18_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const restaurant_r9 = restoredCtx.$implicit;\n      const ctx_r12 = i0.ɵɵnextContext();\n      return ctx_r12.openDeleteModal(restaurant_r9._id);\n    });\n    i0.ɵɵtext(19, \"Delete\");\n    i0.ɵɵelementEnd()()()()();\n  }\n\n  if (rf & 2) {\n    const restaurant_r9 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"src\", restaurant_r9.image, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(restaurant_r9.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(restaurant_r9.Chef == null ? null : restaurant_r9.Chef.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(restaurant_r9.signatureDish == null ? null : restaurant_r9.signatureDish.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(restaurant_r9.isPopular === false ? \"No\" : \"Yes\");\n  }\n}\n\nexport let RestaurantsComponent = /*#__PURE__*/(() => {\n  class RestaurantsComponent {\n    constructor(restaurantsService) {\n      this.restaurantsService = restaurantsService;\n      this.restaurants = [];\n      this.editMode = \"add\";\n      this.showModal = false;\n      this.showDeleteModal = false;\n    }\n\n    ngOnInit() {\n      this.restaurantsService.getAllRestaurants().subscribe(restaurant => {\n        this.restaurants = restaurant;\n        console.log(this.restaurants);\n      });\n    }\n\n    openModal(status, restaurant) {\n      this.editMode = status;\n      this.message = status === \"edit\" ? \"Edit Restaurant\" : \"Add Restaurant\";\n      this.editRestaurant = restaurant === undefined ? {\n        _id: '',\n        name: '',\n        image: '',\n        Chef: null,\n        signatureDish: null,\n        isPopular: false\n      } : restaurant;\n      this.showModal = !this.showModal;\n    }\n\n    openDeleteModal(id) {\n      this.deletedRestaurantId = id;\n      this.showDeleteModal = !this.showDeleteModal;\n    }\n\n    closeModal(status) {\n      this.showModal = status;\n    }\n\n    closeDeleteModal(status) {\n      this.showDeleteModal = status;\n    }\n\n    addRestaurant(Restaurant) {\n      console.log(Restaurant);\n      Restaurant._id === \"\" ? this.restaurantsService.addRestaurant(Restaurant).subscribe(restaurant => {\n        console.log(restaurant);\n      }) : this.restaurantsService.updateRestaurant(Restaurant._id, Restaurant).subscribe(restaurant => {\n        console.log(restaurant);\n      });\n      this.restaurantsService.getAllRestaurants().subscribe(restaurant => {\n        this.restaurants = restaurant;\n      });\n      this.showModal = false;\n    }\n\n    deleteRestaurant(restaurant) {\n      this.restaurantsService.deleteRestaurant(restaurant).subscribe(restaurant => {\n        console.log(restaurant);\n        this.showDeleteModal = false;\n      });\n      this.restaurantsService.getAllRestaurants().subscribe(restaurant => {\n        this.restaurants = restaurant;\n      });\n    }\n\n  }\n\n  RestaurantsComponent.ɵfac = function RestaurantsComponent_Factory(t) {\n    return new (t || RestaurantsComponent)(i0.ɵɵdirectiveInject(i1.RestaurantsService));\n  };\n\n  RestaurantsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: RestaurantsComponent,\n    selectors: [[\"app-restaurants\"]],\n    features: [i0.ɵɵProvidersFeature([RestaurantsService])],\n    decls: 20,\n    vars: 3,\n    consts: [[\"type\", \"button\", 1, \"btn\", \"btn-info\", 3, \"click\"], [3, \"message\", \"editMode\", \"editRestaurant\", \"restaurantCreated\", \"closeModalPopup\", 4, \"ngIf\"], [3, \"item\", \"closeDeleteModalPopup\", \"itemDeleted\", 4, \"ngIf\"], [1, \"table\"], [\"scope\", \"col\"], [4, \"ngFor\", \"ngForOf\"], [3, \"message\", \"editMode\", \"editRestaurant\", \"restaurantCreated\", \"closeModalPopup\"], [3, \"item\", \"closeDeleteModalPopup\", \"itemDeleted\"], [\"scope\", \"row\"], [\"width\", \"100px\", \"height\", \"100px\", 1, \"img-thumbnail\", 3, \"src\"], [1, \"action-link\"], [3, \"click\"]],\n    template: function RestaurantsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"button\", 0);\n        i0.ɵɵlistener(\"click\", function RestaurantsComponent_Template_button_click_0_listener() {\n          return ctx.openModal(\"add\");\n        });\n        i0.ɵɵtext(1, \" + Add Restaurant\\n\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(2, RestaurantsComponent_app_restaurant_modal_2_Template, 1, 3, \"app-restaurant-modal\", 1);\n        i0.ɵɵtemplate(3, RestaurantsComponent_app_delete_modal_3_Template, 1, 1, \"app-delete-modal\", 2);\n        i0.ɵɵelementStart(4, \"table\", 3)(5, \"thead\")(6, \"tr\")(7, \"th\", 4);\n        i0.ɵɵtext(8, \"Image\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"th\", 4);\n        i0.ɵɵtext(10, \"Name\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"th\", 4);\n        i0.ɵɵtext(12, \"Chef\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"th\", 4);\n        i0.ɵɵtext(14, \"Signature Dish\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"th\", 4);\n        i0.ɵɵtext(16, \"Popular\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"th\", 4);\n        i0.ɵɵtext(18, \"Actions\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵtemplate(19, RestaurantsComponent_tbody_19_Template, 20, 5, \"tbody\", 5);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.showModal);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.showDeleteModal);\n        i0.ɵɵadvance(16);\n        i0.ɵɵproperty(\"ngForOf\", ctx.restaurants);\n      }\n    },\n    directives: [i2.NgIf, i3.RestaurantModalComponent, i4.DeleteModalComponent, i2.NgForOf],\n    styles: [\"img[_ngcontent-%COMP%]{width:76px;height:66px;border-radius:50%}\"]\n  });\n  return RestaurantsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}