{"ast":null,"code":"import _asyncToGenerator from \"/Users/omrikellner/WebstormProjects/epicure-admin-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/services/auth.service\";\nimport * as i3 from \"@angular/material/card\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@angular/material/form-field\";\nexport class RegisterComponent {\n  constructor(router, authService) {\n    this.router = router;\n    this.authService = authService;\n    this.form = new FormGroup({\n      email: new FormControl('', [Validators.required, Validators.email]),\n      password: new FormControl('', [Validators.required, Validators.minLength(10)])\n    });\n  }\n\n  ngOnInit() {\n    if (this.authService.isLoggedIn()) {\n      this.router.navigate(['admin']);\n    }\n  }\n\n  onSubmit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      if (_this.form.valid) {\n        const email = _this.form.value.email;\n        const password = _this.form.value.password;\n\n        try {\n          yield _this.authService.register(email, password);\n\n          _this.router.navigate(['login']);\n\n          alert('Created new user!');\n        } catch (error) {\n          console.log(error);\n          alert(error.error.error.name);\n        }\n      }\n    })();\n  }\n\n  onBack() {\n    // no validation req here\n    this.router.navigate(['login']);\n  }\n\n}\n\nRegisterComponent.ɵfac = function RegisterComponent_Factory(t) {\n  return new (t || RegisterComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.AuthService));\n};\n\nRegisterComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: RegisterComponent,\n  selectors: [[\"app-register\"]],\n  decls: 17,\n  vars: 1,\n  consts: [[3, \"formGroup\", \"ngSubmit\"], [\"type\", \"text\", \"matInput\", \"\", \"placeholder\", \"Email\", \"formControlName\", \"email\"], [\"type\", \"password\", \"matInput\", \"\", \"placeholder\", \"Password\", \"formControlName\", \"password\"], [1, \"button\"], [\"type\", \"submit\", \"mat-button\", \"\"], [\"mat-button\", \"\", 3, \"click\"]],\n  template: function RegisterComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"p\");\n      i0.ɵɵtext(1, \"register works!\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"mat-card\")(3, \"mat-card-title\");\n      i0.ɵɵtext(4, \"Register\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"mat-card-content\")(6, \"form\", 0);\n      i0.ɵɵlistener(\"ngSubmit\", function RegisterComponent_Template_form_ngSubmit_6_listener() {\n        return ctx.onSubmit();\n      });\n      i0.ɵɵelementStart(7, \"mat-form-field\");\n      i0.ɵɵelement(8, \"input\", 1);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"mat-form-field\");\n      i0.ɵɵelement(10, \"input\", 2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"div\", 3)(12, \"button\", 4);\n      i0.ɵɵtext(13, \"Register\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(14, \"div\", 3)(15, \"button\", 5);\n      i0.ɵɵlistener(\"click\", function RegisterComponent_Template_button_click_15_listener() {\n        return ctx.onBack();\n      });\n      i0.ɵɵtext(16, \"Go Back\");\n      i0.ɵɵelementEnd()()()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"formGroup\", ctx.form);\n    }\n  },\n  directives: [i3.MatCard, i3.MatCardTitle, i3.MatCardContent, i4.ɵNgNoValidate, i4.NgControlStatusGroup, i4.FormGroupDirective, i5.MatFormField, i4.DefaultValueAccessor, i4.NgControlStatus, i4.FormControlName],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJyZWdpc3Rlci5jb21wb25lbnQuc2NzcyJ9 */\"]\n});","map":{"version":3,"sources":["/Users/omrikellner/WebstormProjects/epicure-admin-angular/src/app/pages/register/register.component.ts"],"names":["FormControl","FormGroup","Validators","i0","i1","i2","i3","i4","i5","RegisterComponent","constructor","router","authService","form","email","required","password","minLength","ngOnInit","isLoggedIn","navigate","onSubmit","valid","value","register","alert","error","console","log","name","onBack","ɵfac","RegisterComponent_Factory","t","ɵɵdirectiveInject","Router","AuthService","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","RegisterComponent_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","RegisterComponent_Template_form_ngSubmit_6_listener","ɵɵelement","RegisterComponent_Template_button_click_15_listener","ɵɵadvance","ɵɵproperty","directives","MatCard","MatCardTitle","MatCardContent","ɵNgNoValidate","NgControlStatusGroup","FormGroupDirective","MatFormField","DefaultValueAccessor","NgControlStatus","FormControlName","styles"],"mappings":"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","sourcesContent":["import { FormControl, FormGroup, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/services/auth.service\";\nimport * as i3 from \"@angular/material/card\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@angular/material/form-field\";\nexport class RegisterComponent {\n    constructor(router, authService) {\n        this.router = router;\n        this.authService = authService;\n        this.form = new FormGroup({\n            email: new FormControl('', [Validators.required, Validators.email]),\n            password: new FormControl('', [\n                Validators.required,\n                Validators.minLength(10),\n            ]),\n        });\n    }\n    ngOnInit() {\n        if (this.authService.isLoggedIn()) {\n            this.router.navigate(['admin']);\n        }\n    }\n    async onSubmit() {\n        if (this.form.valid) {\n            const email = this.form.value.email;\n            const password = this.form.value.password;\n            try {\n                await this.authService.register(email, password);\n                this.router.navigate(['login']);\n                alert('Created new user!');\n            }\n            catch (error) {\n                console.log(error);\n                alert(error.error.error.name);\n            }\n        }\n    }\n    onBack() {\n        // no validation req here\n        this.router.navigate(['login']);\n    }\n}\nRegisterComponent.ɵfac = function RegisterComponent_Factory(t) { return new (t || RegisterComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.AuthService)); };\nRegisterComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: RegisterComponent, selectors: [[\"app-register\"]], decls: 17, vars: 1, consts: [[3, \"formGroup\", \"ngSubmit\"], [\"type\", \"text\", \"matInput\", \"\", \"placeholder\", \"Email\", \"formControlName\", \"email\"], [\"type\", \"password\", \"matInput\", \"\", \"placeholder\", \"Password\", \"formControlName\", \"password\"], [1, \"button\"], [\"type\", \"submit\", \"mat-button\", \"\"], [\"mat-button\", \"\", 3, \"click\"]], template: function RegisterComponent_Template(rf, ctx) { if (rf & 1) {\n        i0.ɵɵelementStart(0, \"p\");\n        i0.ɵɵtext(1, \"register works!\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"mat-card\")(3, \"mat-card-title\");\n        i0.ɵɵtext(4, \"Register\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"mat-card-content\")(6, \"form\", 0);\n        i0.ɵɵlistener(\"ngSubmit\", function RegisterComponent_Template_form_ngSubmit_6_listener() { return ctx.onSubmit(); });\n        i0.ɵɵelementStart(7, \"mat-form-field\");\n        i0.ɵɵelement(8, \"input\", 1);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"mat-form-field\");\n        i0.ɵɵelement(10, \"input\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"div\", 3)(12, \"button\", 4);\n        i0.ɵɵtext(13, \"Register\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(14, \"div\", 3)(15, \"button\", 5);\n        i0.ɵɵlistener(\"click\", function RegisterComponent_Template_button_click_15_listener() { return ctx.onBack(); });\n        i0.ɵɵtext(16, \"Go Back\");\n        i0.ɵɵelementEnd()()()()();\n    } if (rf & 2) {\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"formGroup\", ctx.form);\n    } }, directives: [i3.MatCard, i3.MatCardTitle, i3.MatCardContent, i4.ɵNgNoValidate, i4.NgControlStatusGroup, i4.FormGroupDirective, i5.MatFormField, i4.DefaultValueAccessor, i4.NgControlStatus, i4.FormControlName], styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJyZWdpc3Rlci5jb21wb25lbnQuc2NzcyJ9 */\"] });\n"]},"metadata":{},"sourceType":"module"}