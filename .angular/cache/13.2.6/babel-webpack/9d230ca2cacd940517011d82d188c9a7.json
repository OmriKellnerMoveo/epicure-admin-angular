{"ast":null,"code":"import _asyncToGenerator from \"/Users/omrikellner/WebstormProjects/epicure-admin-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nlet RegisterComponent = class RegisterComponent {\n  constructor(router, authService) {\n    this.router = router;\n    this.authService = authService;\n    this.form = new FormGroup({\n      email: new FormControl('', [Validators.required, Validators.email]),\n      password: new FormControl('', [Validators.required, Validators.minLength(10)])\n    });\n  }\n\n  ngOnInit() {\n    if (this.authService.isLoggedIn()) {\n      this.router.navigate(['admin']);\n    }\n  }\n\n  onSubmit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      if (_this.form.valid) {\n        const email = _this.form.value.email;\n        const password = _this.form.value.password;\n\n        try {\n          yield _this.authService.register(email, password);\n\n          _this.router.navigate(['login']);\n\n          alert('Created new user!');\n        } catch (error) {\n          console.log(error);\n          alert(error.error.error.name);\n        }\n      }\n    })();\n  }\n\n  onBack() {\n    // no validation req here\n    this.router.navigate(['login']);\n  }\n\n};\nRegisterComponent = __decorate([Component({\n  selector: 'app-register',\n  templateUrl: './register.component.html',\n  styleUrls: ['./register.component.scss']\n})], RegisterComponent);\nexport { RegisterComponent };","map":{"version":3,"sources":["/Users/omrikellner/WebstormProjects/epicure-admin-angular/src/app/pages/register/register.component.ts"],"names":["__decorate","Component","FormControl","FormGroup","Validators","RegisterComponent","constructor","router","authService","form","email","required","password","minLength","ngOnInit","isLoggedIn","navigate","onSubmit","valid","value","register","alert","error","console","log","name","onBack","selector","templateUrl","styleUrls"],"mappings":";AAAA,SAASA,UAAT,QAA2B,OAA3B;AACA,SAASC,SAAT,QAA0B,eAA1B;AACA,SAASC,WAAT,EAAsBC,SAAtB,EAAiCC,UAAjC,QAAmD,gBAAnD;AACA,IAAIC,iBAAiB,GAAG,MAAMA,iBAAN,CAAwB;AAC5CC,EAAAA,WAAW,CAACC,MAAD,EAASC,WAAT,EAAsB;AAC7B,SAAKD,MAAL,GAAcA,MAAd;AACA,SAAKC,WAAL,GAAmBA,WAAnB;AACA,SAAKC,IAAL,GAAY,IAAIN,SAAJ,CAAc;AACtBO,MAAAA,KAAK,EAAE,IAAIR,WAAJ,CAAgB,EAAhB,EAAoB,CAACE,UAAU,CAACO,QAAZ,EAAsBP,UAAU,CAACM,KAAjC,CAApB,CADe;AAEtBE,MAAAA,QAAQ,EAAE,IAAIV,WAAJ,CAAgB,EAAhB,EAAoB,CAC1BE,UAAU,CAACO,QADe,EAE1BP,UAAU,CAACS,SAAX,CAAqB,EAArB,CAF0B,CAApB;AAFY,KAAd,CAAZ;AAOH;;AACDC,EAAAA,QAAQ,GAAG;AACP,QAAI,KAAKN,WAAL,CAAiBO,UAAjB,EAAJ,EAAmC;AAC/B,WAAKR,MAAL,CAAYS,QAAZ,CAAqB,CAAC,OAAD,CAArB;AACH;AACJ;;AACKC,EAAAA,QAAQ,GAAG;AAAA;;AAAA;AACb,UAAI,KAAI,CAACR,IAAL,CAAUS,KAAd,EAAqB;AACjB,cAAMR,KAAK,GAAG,KAAI,CAACD,IAAL,CAAUU,KAAV,CAAgBT,KAA9B;AACA,cAAME,QAAQ,GAAG,KAAI,CAACH,IAAL,CAAUU,KAAV,CAAgBP,QAAjC;;AACA,YAAI;AACA,gBAAM,KAAI,CAACJ,WAAL,CAAiBY,QAAjB,CAA0BV,KAA1B,EAAiCE,QAAjC,CAAN;;AACA,UAAA,KAAI,CAACL,MAAL,CAAYS,QAAZ,CAAqB,CAAC,OAAD,CAArB;;AACAK,UAAAA,KAAK,CAAC,mBAAD,CAAL;AACH,SAJD,CAKA,OAAOC,KAAP,EAAc;AACVC,UAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACAD,UAAAA,KAAK,CAACC,KAAK,CAACA,KAAN,CAAYA,KAAZ,CAAkBG,IAAnB,CAAL;AACH;AACJ;AAbY;AAchB;;AACDC,EAAAA,MAAM,GAAG;AACL;AACA,SAAKnB,MAAL,CAAYS,QAAZ,CAAqB,CAAC,OAAD,CAArB;AACH;;AAnC2C,CAAhD;AAqCAX,iBAAiB,GAAGL,UAAU,CAAC,CAC3BC,SAAS,CAAC;AACN0B,EAAAA,QAAQ,EAAE,cADJ;AAENC,EAAAA,WAAW,EAAE,2BAFP;AAGNC,EAAAA,SAAS,EAAE,CAAC,2BAAD;AAHL,CAAD,CADkB,CAAD,EAM3BxB,iBAN2B,CAA9B;AAOA,SAASA,iBAAT","sourcesContent":["import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nlet RegisterComponent = class RegisterComponent {\n    constructor(router, authService) {\n        this.router = router;\n        this.authService = authService;\n        this.form = new FormGroup({\n            email: new FormControl('', [Validators.required, Validators.email]),\n            password: new FormControl('', [\n                Validators.required,\n                Validators.minLength(10),\n            ]),\n        });\n    }\n    ngOnInit() {\n        if (this.authService.isLoggedIn()) {\n            this.router.navigate(['admin']);\n        }\n    }\n    async onSubmit() {\n        if (this.form.valid) {\n            const email = this.form.value.email;\n            const password = this.form.value.password;\n            try {\n                await this.authService.register(email, password);\n                this.router.navigate(['login']);\n                alert('Created new user!');\n            }\n            catch (error) {\n                console.log(error);\n                alert(error.error.error.name);\n            }\n        }\n    }\n    onBack() {\n        // no validation req here\n        this.router.navigate(['login']);\n    }\n};\nRegisterComponent = __decorate([\n    Component({\n        selector: 'app-register',\n        templateUrl: './register.component.html',\n        styleUrls: ['./register.component.scss'],\n    })\n], RegisterComponent);\nexport { RegisterComponent };\n"]},"metadata":{},"sourceType":"module"}